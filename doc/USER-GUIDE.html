<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript"></script>
</head>
<body>
<h1 id="codex-user-guide">Codex User Guide</h1>
<p>Pedro Vasconcelos, <code>pbv@dcc.fc.up.pt</code>.</p>
<p>Version 0.8, January 2017.</p>
<p><em>Codex</em> is a web system for setting up exercises with automatic assessment for programming classes. Unlike other systems for this same purpose, it aims on providing good automatic feedback by using <a href="http://www.cse.chalmers.se/~rjmh/QuickCheck/manual.html">state-of-art</a> <a href="https://docs.python.org/2/library/doctest.html">automatic testing tools</a>. It is also directed more towards a learning environment rather than for programming contests; <a href="https://mooshak.dcc.fc.up.pt/">Mooshak</a> is a better tool for the later purpose.</p>
<p>Althought <em>Codex</em> is stil in early development stage, it is already being used in the Faculty of Science of the University of Porto for teaching introductory courses on programming in Python.</p>
<p>This guide explains how to write <em>Codex</em> exercise pages.</p>
<h2 id="pages">Pages</h2>
<p>Codex repositories are organized into <em>pages</em>. A page can contain formated text, links, tables, images, mathematics, etc.</p>
<p>Codex pages are simple text files with the <code>.md</code> extension; Markdown annotations are used for formating. Here is an example page:</p>
<pre style="margin: 2em; padding: 1em; width: 50em; border: solid; border-width: 1px;"><code># This is a header

## This is a sub-header

This is the first paragraph. This sentence shows *emphasis*,
**strong emphasis** and `inline-code style`.

This is another paragraph with an itemized list:

1. first item;
2. second item;
3. last item.

~~~{.python}
# a verbatim code block (with Python highlighting)
def dist(x, y):
   return sqrt(x*x + y*y)
~~~

This is a link to [Google&#39;s home page](http://www.google.com).

You can also include LaTeX mathematics either 
inline $h = \sqrt{x^2+y^2}$ or as displayed equations:
$$ erf(x) = \frac{1}{\sqrt{x}}\int_{-x}^x e^{-t^2} dt\,. $$</code></pre>
<p>The above could be rendered in HTML as follows:</p>
<div style="margin:2em; padding:1em; width:50em; border:solid; border-width:1px;">
<h1 id="this-is-a-header">This is a header</h1>
<h2 id="this-is-a-sub-header">This is a sub-header</h2>
<p>This is the first paragraph. This sentence shows <em>emphasis</em>, <strong>strong emphasis</strong> and <code>inline-code style</code>.</p>
<p>This is another paragraph with an itemized list:</p>
<ol style="list-style-type: decimal">
<li>first item;</li>
<li>second item;</li>
<li>last item.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># a verbatim code block (with Python highlighting)</span>
<span class="kw">def</span> dist(x, y):
  <span class="cf">return</span> sqrt(x<span class="op">*</span>x <span class="op">+</span> y<span class="op">*</span>y)</code></pre></div>
<p>This is a link to <a href="http://www.google.com">Google's home page</a>.</p>
<p>You can also include LaTeX mathematics either inline <span class="math inline">\(h = \sqrt{x^2+y^2}\)</span> or as displayed equations: <span class="math display">\[ erf(x) = \frac{1}{\sqrt{x}}\int_{-x}^x e^{-t^2} dt\,. \]</span></p>
</div>
<p>Codex uses the <a href="http://hackage.haskell.org/package/pandoc">Pandoc library</a> for reading and rendering Markdown and <a href="http://www.mathjax.org">MathJaX</a> for displaying mathematics. For details on the Markdown syntax accepted, check the <a href="http://pandoc.org/MANUAL.html#pandocs-markdown">Pandoc user manual</a>. Note, however, that raw HTML markup is <em>not</em> accepted (it will simply be escaped and rendered as ordinary text).</p>
<h2 id="metadata-blocks">Metadata blocks</h2>
<p>Markdown text can also include YAML metadata blocks delimited between 3 dashes (<code>---</code>) and 3 full stops (<code>...</code>); here is an example:</p>
<pre><code>---
author: Pedro Vasconcelos
title: A sample exercise
exercise: true
language: python
...</code></pre>
<p>Metadata blocks can occur anywhere, but the convention is to put them at the beginning of the document. Several metatata blocks are also allowed and equivalent to a single one with all collected fields.</p>
<p>Some fields (like <code>author</code> and <code>title</code>) are generic, while others (like <code>exercise</code> and <code>language</code>) are specific to exercise testing in Codex. These are described in detail in a <a href="#metadata-fields">later section</a>.</p>
<h2 id="exercise-pages">Exercise pages</h2>
<p>A page marked with metadata <code>exercise: true</code> is an <em>exercise page</em>; this means that users will be able to:</p>
<ul>
<li><em>submit</em> solutions for automatic assessment;</li>
<li><em>view feedback</em> on their submissions;</li>
<li><em>view</em> past submissions and feedback;</li>
<li><em>edit and re-submit</em> past submissions.</li>
</ul>
<p>Any user can submit to any exercise. Note that exercises are identified in the submissions database by the page's <em>request path</em> relative to the <code>/pub</code> handle; e.g. an exercise with URL <code>https://server.domain/pub/foo/bar.md</code> is identified as <code>foo/bar.md</code>. This means that if the file name or path are modified, any previous submissions will no longer be visible (but will still be recorded in the database).</p>
<h2 id="linking-exercise-pages">Linking exercise pages</h2>
<p>After a successful login, Codex shows an <code>index.md</code> page; authors should edit this page to link other pages and exercises.</p>
<p>For example, supose you have created exercises <code>work1.md</code>, <code>work2.md</code> and <code>work3.md</code>; here is a suitable <code>index.md</code> page:</p>
<pre style="margin: 2em; padding: 1em; width: 50em; border: solid; border-width: 1px;"><code># Welcome!

Here is a list of available exercises:

1. [](work1.md){.ex}
2. [](work2.md){.ex}
3. [](work3.md){.ex}</code></pre>
<p>Links for exercises are marked with a special class <code>.ex</code>. Codex will then automatically fill-in the exercise title for link anchor text with and insert a short summary of previous submissions by the logged-in user.</p>
<p>Note also that authors can freely modify exercise order, or group exercises by using sections or sub-pages. It is also possible to include explanatory pages, images or links to external resources.</p>
<h2 id="metadata-fields">Metadata fields</h2>
<dl>
<dt><code>title</code></dt>
<dd><p>Specify a title for the exercise; if this is field missing, the first header is used instead.</p>
</dd>
<dt><code>language</code></dt>
<dd><p>Specify the programming language for this exercise, e.g. <code>python</code>, <code>haskell</code>, <code>c</code></p>
</dd>
<dt><code>valid</code></dt>
<dd><p>Specify valid submission time interval; the default is <code>always</code> which means submissions are always valid. Some alternatives:</p>
<ul>
<li><code>after 08:00 15/02/2017</code></li>
<li><code>between 08:00 15/02/2017 and 12:00 15/02/2017</code></li>
<li><code>after 16/02/2017</code></li>
</ul>
<p>Note that dates and times are interpreted relative to the server local timezone.</p>
</dd>
<dt><code>feedback</code></dt>
<dd><p>Specify the level of feedback to report (0-100); 0 means no feedback, 50 shows classifications only, 100 shows classifications and failed test cases (default).</p>
</dd>
<dt><code>code</code></dt>
<dd><p>Specify an initial &quot;skeleton&quot; for solutions; use an indented block for multiple lines, e.g.:</p>
<pre><code>code: |
  ~~~
  # distance between two points in the plane
  def distance(x1, y1, x2, y2):
      # complete this definition
  ~~~</code></pre>
<p>Note the vertical bar (<code>|</code>) and indentation in the above example.</p>
</dd>
</dl>
<p>The following fields are specific to programming languages.</p>
<h3 id="python-fields">Python fields</h3>
<dl>
<dt><code>doctest</code></dt>
<dd><p>Specifies the file path for a doctest script for submission testing; if omitted, this defaults to the file name for exercise page with extension replaced by <code>.tst</code>, e.g. the doctest for <code>foo/bar.md</code> would be <code>foo/bar.tst</code>.</p>
</dd>
</dl>
<h3 id="haskell-and-c-fields">Haskell and C fields</h3>
<dl>
<dt><code>quickcheck</code></dt>
<dd><p>Specifies the file name for QuickCheck properties for submission testing.</p>
</dd>
<dt><code>maxSuccess</code></dt>
<dd><p>Number of QuickCheck tests run.</p>
</dd>
<dt><code>maxSize</code></dt>
<dd><p>Maximum size for QuickCheck generated test cases.</p>
</dd>
<dt><code>maxDiscardRatio</code></dt>
<dd><p>Maximum number of discarded tests per successful test before giving up.</p>
</dd>
<dt><code>randSeed</code></dt>
<dd><p>Integer seed value for pseudo-random test cases generation; use to ensure the reproducibility of QuickCheck test cases.</p>
</dd>
</dl>
<h2 id="assement-and-feedback">Assement and Feedback</h2>
<p>Codex assesses submissions by testing them against a large number of test cases (either provided by the author or randomly-generated). The result of testing is a <em>classification label</em>, a <em>timing label</em> and a <em>detailed text message</em>. The classification labels are similar to the ones used for <a href="https://icpc.baylor.edu/worldfinals/rules">ICPC programming contests</a> (e.g. <em>Accepted</em>, <em>WrongAnswer</em>, etc.).</p>
<p>When submission are rejected because of a wrong answer, the text message is a human-readable description of a failed test case; this can be used by the student as a starting point for aiding debugging.</p>
<p>Note that Codex will <em>always</em> process submissions regardless of the timing interval specified an exercise; however:</p>
<ul>
<li>the system will not show any feedback for early submissions until the start of submission interval;</li>
<li>late submissions will be marked as <em>Overdue</em>; it is up to the exercise author to decide how handle these cases.</li>
</ul>
<h3 id="classification-labels">Classification labels</h3>
<dl>
<dt><em>Accepted</em></dt>
<dd><p>The submission passed all tests.</p>
</dd>
<dt><em>WrongAnswer</em></dt>
<dd><p>The submission was rejected because it failed at least one test case.</p>
</dd>
<dt><em>CompileError</em></dt>
<dd><p>The submission was rejected because it caused a compile-time error.</p>
</dd>
<dt><em>RuntimeError</em></dt>
<dd><p>The submission was rejected because it caused a runtime error (e.g. runtime exception, segmentation fault)</p>
</dd>
<dt><em>RuntimeLimitExceeded</em>, <em>MemoryLimitExceeded</em></dt>
<dd><p>The submission was reject because it tried to use too much computing resources (e.g. non-terminating program).</p>
</dd>
<dt><em>MiscError</em></dt>
<dd><p>Some other error (e.g. incorrect metadata fields, test files, etc.)</p>
</dd>
<dt><em>Evaluating</em></dt>
<dd><p>Temporary result while waiting for evaluation; end-users should never see this.</p>
</dd>
</dl>
<h3 id="timing-labels">Timing labels</h3>
<dl>
<dt><em>Early</em></dt>
<dd><p>Received before the start of submission interval.</p>
</dd>
<dt><em>Valid</em></dt>
<dd><p>Received within the valid submission interval.</p>
</dd>
<dt><em>Overdue</em></dt>
<dd><p>Received after the end of the submission interval.</p>
</dd>
</dl>
<hr />
<p>Pedro Vasconcelos, 2017.</p>
</body>
</html>
